---
description: Основные правила разработки для проекта Вокзал.ТЕХ
alwaysApply: true
---

# Вокзал.ТЕХ — Основные правила разработки

## Общие принципы

- **Название проекта:** Всегда используй "Вокзал.ТЕХ" (только на русском языке)
- **Домен:** `vokzal.tech` и поддомены `api.vokzal.tech`, `admin.vokzal.tech` и т.д.
- **Язык по умолчанию:** Русский (для UI, документации, комментариев)
- **Маскот:** Вокзалик — робот на колёсах с экраном-лицом
- **Фраза:** "Вокзалик знает, когда уезжать!"

## Соответствие законодательству

### 152-ФЗ (Защита персональных данных)
- Шифровать PII (ФИО, паспорт, телефон) с использованием AES-256
- Логировать все операции с персональными данными в audit сервис
- Требовать согласие на обработку ПД при сборе данных
- Хранить логи минимум 1 год

### 54-ФЗ (Фискализация)
- Все продажи через ККТ (АТОЛ)
- Отправка чеков в ОФД в течение 30 секунд
- Ежедневные Z-отчёты
- Хранение фискальных данных 5 лет

## Архитектурные принципы

### Микросервисы (Go)
- Каждый сервис — отдельная БД схема или таблицы с префиксом
- Взаимодействие через NATS (асинхронно) или HTTP (синхронно)
- JWT аутентификация для всех защищённых endpoint'ов
- Логирование в JSON формате (Zap)

### Frontend (React + TypeScript)
- Строгая типизация с TypeScript
- Валидация данных с Zod
- API запросы через TanStack Query
- i18next для локализации (RU/EN)

### Безопасность
- HTTPS (TLS 1.3) для всех соединений
- JWT токены с коротким TTL (24 часа)
- RBAC (Role-Based Access Control)
- Rate limiting (100 req/min per IP)

## Примеры

### ❌ Неправильно
```go
// Deparq API endpoint
func (s *Server) GetTickets() {
    // код без логирования
}
```

### ✅ Правильно
```go
// Вокзал.ТЕХ API endpoint
func (s *Server) GetTickets(c *gin.Context) {
    s.logger.Info("Getting tickets", 
        zap.String("user_id", c.GetString("user_id")),
        zap.String("station_id", c.GetString("station_id")))
    
    // код с обработкой ошибок
}
```

## Не придумывай функции

Реализуй только то, что описано в документации. Не добавляй функции, которых нет в требованиях.
